---
layout: post
title: "Announcing Ottoman"
---
"As promised":http://mooseyard.com/Jens/2009/09/i-has-a-hash-table/ ...

h2. "Ottoman":http://bitbucket.org/snej/ottoman/wiki/Home is a lightweight, reliable key-value store with multi-version concurrency control.

!http://bitbucket.org/snej/ottoman/wiki/ottoman.jpg!

A key-value store is a persistent on-disk dictionary that maps arbitrary keys (usually short text strings) to arbitrary values (binary data of any length). There's already a large and venerable family of libraries that do this, often referred to by the name "db". Notable members include "dbm":http://en.wikipedia.org/wiki/Dbm, "Berkeley DB":http://www.oracle.com/database/berkeley-db/index.html, "cdb":http://cr.yp.to/cdb.html and "Tokyo Cabinet":http://tokyocabinet.sourceforge.net. What makes "Ottoman":http://bitbucket.org/snej/ottoman/wiki/Home different? 

# It tries to provide "*extremely reliable storage*":http://bitbucket.org/snej/ottoman/wiki/Storage, immune to "file corruption":http://bitbucket.org/snej/ottoman/wiki/Corruption caused by operating system crashes or power failure while writing.
# It *stores past versions* of the database, as a useful side-effect of the way it works. Applications can use this to provide features like snapshots, timelines or persistent undo. (You can prune old versions, for space or privacy reasons, by writing a fresh copy of the file.)
# It has *very low memory overhead*. The file and its contents are memory-mapped, so even large values can be accessed without having to copy them into the heap. (Opening a database only mallocs a few hundred bytes!)
# It allows *concurrent read/write access* by multiple processes. *Optimistic concurrency* — as used by version-control systems like Subversion — keeps file locking to a minimum: readers are //never// blocked at all, and writers are only blocked briefly (clients can't lock the database for arbitrary periods, only for as long as it takes the accumulated changes to be written to disk.)

Why is it named after a footstool? First, as an homage to "CouchDB":http://couchdb.apache.org. Secondly, it turns out "ottomans can be used for storage":http://images.google.com/images?q=storage%20ottoman. Third, because I have a mild fascination with "Asian and Islamic history":http://en.wikipedia.org/wiki/Ottoman_empire.

"_...Read more at the project home page!_":http://bitbucket.org/snej/ottoman/wiki/Home